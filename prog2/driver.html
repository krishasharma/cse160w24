<!DOCTYPE html>
<html>
<head>
    <title>Surface of Revolution</title>
    <style>
        /* Simple CSS for layout */
        #controls {
            margin-bottom: 10px;
        }
    </style>
    <script src="sor.js" type="text/javascript"></script>
</head>
<body>
    <div id="controls">
        <!-- Slider for number of sides -->
        <label for="sidesSlider">Number of sides:</label>
        <input type="range" id="sidesSlider" min="3" max="100" value="10">
        <!-- Button to apply changes -->
        <button id="applyButton">Apply Changes</button>
    </div>

    <canvas id="glcanvas" width="640" height="480"></canvas>

    <script type="text/javascript">
        // WebGL context initialization and rendering code
        let gl;
        let shaderProgram;
        let sorBuffers; // Buffer for storing SOR vertex and index data

        function initWebGL() {
            const canvas = document.getElementById("glcanvas");
            gl = canvas.getContext("webgl");

            if (!gl) {
                alert("Unable to initialize WebGL. Your browser may not support it.");
                return;
            }

            initShaders();
            // Initial buffer setup can be done here if necessary
        }

        function initShaders() {
            // ... Shader initialization code ...
        }

        function createSORBuffers(sorObject) {
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(sorObject.vertices), gl.STATIC_DRAW);

            const indexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(sorObject.indices), gl.STATIC_DRAW);

            return {
                vertexBuffer,
                indexBuffer,
                vertexCount: sorObject.indices.length
            };
        }

        function bindSORBuffers(buffers) {
            const positionAttributeLocation = gl.getAttribLocation(shaderProgram, "aPosition");

            gl.bindBuffer(gl.ARRAY_BUFFER, buffers.vertexBuffer);
            gl.vertexAttribPointer(positionAttributeLocation, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(positionAttributeLocation);

            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indexBuffer);
        }

        function drawScene() {
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            
            // ... Additional setup code ...

            if (sorBuffers) {
                bindSORBuffers(sorBuffers);
                gl.drawElements(gl.TRIANGLES, sorBuffers.vertexCount, gl.UNSIGNED_SHORT, 0);
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            initWebGL();

            const sidesSlider = document.getElementById('sidesSlider');
            const applyButton = document.getElementById('applyButton');

            applyButton.addEventListener('click', function() {
                handleUserInput(sidesSlider.value);
            });

            sidesSlider.addEventListener('input', function() {
                handleUserInput(sidesSlider.value);
            });
        });

        function handleUserInput(sides) {
            const userSides = parseInt(sides);
            const userSorObject = generateSOR(rotatedProfile, userSides);

            sorBuffers = createSORBuffers(userSorObject);

            drawScene();
        }

        // Include the sor.js file
        // <script src="sor.js"></script>

        // ... Other necessary JavaScript code ...

    </script>
</body>
</html>